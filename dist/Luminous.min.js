!function(e,t){if("function"==typeof define&&define.amd)define(["exports","./util/dom","./injectBaseStylesheet","./Lightbox"],t);else if("undefined"!=typeof exports)t(exports,require("./util/dom"),require("./injectBaseStylesheet"),require("./Lightbox"));else{var i={exports:{}};t(i.exports,e.dom,e.injectBaseStylesheet,e.Lightbox),e.Luminous=i.exports}}(this,function(e,t,i,n){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.VERSION=void 0;var r=s(i),l=s(n),u=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),c=(e.VERSION="0.2.2",function(){function e(i){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(o(this,e),a.call(this),this.isOpen=!1,this.trigger=i,!(0,t.isDOMElement)(this.trigger))throw new TypeError("`new Luminous` requires a DOM element as its first argument.");var s=n.namespace,l=void 0===s?null:s,u=n.sourceAttribute,c=void 0===u?"href":u,g=n.captionAttribute,d=void 0===g?null:g,h=n.openTrigger,p=void 0===h?"click":h,f=n.closeTrigger,v=void 0===f?"click":f,b=n.closeWithEscape,y=void 0===b?!0:b,m=n.closeOnScroll,E=void 0===m?!1:m,x=n.appendToSelector,S=void 0===x?"body":x,O=n.onOpen,L=void 0===O?null:O,w=n.onClose,_=void 0===w?null:w,T=n.includeImgixJSClass,C=void 0===T?!1:T,k=n.injectBaseStyles,j=void 0===k?!0:k;this.settings={namespace:l,sourceAttribute:c,captionAttribute:d,openTrigger:p,closeTrigger:v,closeWithEscape:y,closeOnScroll:E,appendToSelector:S,onOpen:L,onClose:_,includeImgixJSClass:C,injectBaseStyles:j},this.settings.injectBaseStyles&&(0,r["default"])(),this._buildLightbox(),this._bindEvents()}return u(e,[{key:"_buildLightbox",value:function(){this.lightbox=new l["default"]({namespace:this.settings.namespace,parentEl:document.querySelector(this.settings.appendToSelector),triggerEl:this.trigger,sourceAttribute:this.settings.sourceAttribute,captionAttribute:this.settings.captionAttribute,includeImgixJSClass:this.settings.includeImgixJSClass})}},{key:"_bindEvents",value:function(){this.trigger.addEventListener(this.settings.openTrigger,this.open,!1),this.settings.closeWithEscape&&window.addEventListener("keyup",this._handleKeyup,!1)}},{key:"_bindCloseEvent",value:function(){this.lightbox.el.addEventListener(this.settings.closeTrigger,this.close,!1)}},{key:"_unbindEvents",value:function(){this.trigger.removeEventListener(this.settings.openTrigger,this.open,!1),this.lightbox.el.removeEventListener(this.settings.closeTrigger,this.close,!1),this.settings.closeWithEscape&&window.removeEventListener("keyup",this._handleKeyup,!1)}}]),e}()),a=function(){var e=this;this.open=function(t){t&&"function"==typeof t.preventDefault&&t.preventDefault();var i=e.lightbox.elementBuilt;e.lightbox.open(),i||e._bindCloseEvent(),e.settings.closeOnScroll&&window.addEventListener("scroll",e.close,!1);var n=e.settings.onOpen;n&&"function"==typeof n&&n(),e.isOpen=!0},this.close=function(t){t&&"function"==typeof t.preventDefault&&t.preventDefault(),e.settings.closeOnScroll&&window.removeEventListener("scroll",e.close,!1),e.lightbox.close();var i=e.settings.onClose;i&&"function"==typeof i&&i(),e.isOpen=!1},this._handleKeyup=function(t){e.isOpen&&27===t.keyCode&&e.close()},this.destroy=function(){e._unbindEvents(),e.lightbox.destroy()}};e["default"]=c,global.Luminous=c});